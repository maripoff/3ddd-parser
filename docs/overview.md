# Обзор программы (для 13-летнего)

Эта программа — простой парсер вакансий с сайта. Представь её как маленького робота, который:
1. заходит на страницу с вакансиями,
2. читает HTML (то, как страница выглядит в браузере),
3. отыскивает в нём нужные строки про каждую вакансию (название, ссылка, зарплата),
4. и сохраняет найденные вакансии в файл на компьютере.

Ниже объяснение простыми словами, из каких частей состоит программа и как они работают вместе.

## Компоненты (файлы в `src`)
- `config.js`  
  Хранит настройки: кто мы (User-Agent), куда сохранять данные по умолчанию, сколько ждать перед таймаутом и за сколько дней хранить данные (ретеншн). Также читает переменные окружения из `.env`, если они есть.

- `fetch-html.js`  
  Это часть, которая "заходит на сайт" и скачивает HTML страницы. Она умеет:
  - отправлять HTTP-запрос (с заголовком User-Agent),
  - ждать ответа с ограничением по времени (timeout),
  - если что-то пошло не так — пробовать ещё несколько раз (retries) с паузами (экспоненциальная задержка + небольшой рандом),
  - и в итоге вернуть текст страницы.

- `parse-vacancies.js`  
  Это "глаз" робота: берёт HTML и ищет в нём блоки, где описаны вакансии. Он использует библиотеку `cheerio` (аналог браузерного парсинга, но для Node.js), ищет таблицы с классом `result` и из них вытаскивает:
  - путь/ссылку на вакансию,
  - заголовок (title),
  - текст зарплаты (salary).
  Возвращает массив объектов — по одному объекту на вакансию.

- `start.js`  
  Это "главная кнопка" или главный сценарий. Он соединяет всё вместе:
  1. вызывает `fetchHtml` для страницы вакансий (константа `TARGET` — `https://3ddd.ru/work/vacancies`),
  2. передаёт полученный HTML в `parseVacancies`,
  3. выводит в консоль сколько найдено вакансий и их названия,
  4. сохраняет результат в файл `data/vacancies.json`.
  Там же есть комментарий `TODO`: автор хотел добавить сравнение с ранее сохранёнными вакансиями, чтобы понимать, появились ли новые.

## Как это работает шаг за шагом (простой пример)
1. Ты запускаешь программу (например: `node src/start.js`).
2. `start.js` говорит: "Мне нужно HTML страницы с вакансиями".
3. `fetch-html.js` идёт в интернет, спрашивает страницу и возвращает её текст.
4. `parse-vacancies.js` читает текст и находит все вакансии — делает список объектов.
5. `start.js` печатает список вакансий в консоль и записывает этот список в файл `data/vacancies.json`.

## Куда сохраняется результат
- Файл: `data/vacancies.json`. В нём лежит JSON-массив с объектами вида:
  {
    "path": "/work/vacancy_show/...",
    "title": "Название вакансии",
    "salary": "текст зарплаты"
  }

## Важные детали и подсказки
- В `config.js` есть настройки по умолчанию (например, `TIMEOUT_MS`). Можно менять через переменные окружения.
- `fetch-html.js` делает попытки повторно при ошибках (retries) и использует таймаут — это защищает от долгого ожидания или временных сбоев сети.
- `parse-vacancies.js` ориентирован на структуру HTML конкретного сайта (таблицы с классом `result`). Если сайт изменит структуру, парсер может перестать работать.
- В `start.js` есть заметка, что нужно реализовать сравнение с уже сохранёнными данными, чтобы видеть новые вакансии — сейчас программа каждый раз просто перезаписывает `data/vacancies.json`.

## Как запустить (коротко)
1. Установи зависимости (если ещё не установлены):
   - `npm install`
2. Запусти:
   - `node src/start.js`
   Программа скачает страницу, распарсит вакансии и сохранит их в `data/vacancies.json`.

## Заключение (в двух фразах)
Программа — это набор маленьких модулей: загрузчик страницы, парсер HTML и главный скрипт, который объединяет всё и сохраняет результат. Если представить программу как кухню, то `fetch-html` — курьер, который привозит рецепт (HTML), `parse-vacancies` — повар, который готовит из рецепта полезный список, а `start.js` — хозяин кухни, который запускает процесс и кладёт готовое блюдо в холодильник (файл).
